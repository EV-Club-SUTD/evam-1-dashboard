import React from 'react';
import Animated, {
  interpolate,
  useAnimatedProps,
} from 'react-native-reanimated';
import Svg, {
  Mask,
  Path,
  G,
  Rect,
  Defs,
  LinearGradient,
  Stop,
} from 'react-native-svg';

import { FINAL_TACHOMETER_HEIGHT } from '../utils/config';

const AnimatedRect = Animated.createAnimatedComponent(Rect);

interface LeftTachometerProps {
  progress: Animated.SharedValue<number>;
}

const LeftTachometer: React.FC<LeftTachometerProps> = ({ progress }) => {
  const animatedProps = useAnimatedProps(() => {
    return {
      height: interpolate(progress.value, [0, 100], [834, 0]),
    };
  });
  return (
    <Svg
      width={FINAL_TACHOMETER_HEIGHT * 0.66325}
      height={FINAL_TACHOMETER_HEIGHT}
      viewBox='0 0 564 848'
      fill='none'>
      <Mask
        id='mask0'
        mask-type='alpha'
        maskUnits='userSpaceOnUse'
        x={0}
        y={0}
        width={299}
        height={834}>
        <Path
          fillRule='evenodd'
          clipRule='evenodd'
          d='M204.434 492.405L201.933 483.368C201.933 483.368 200.844 479.457 199.001 472.418L132.511 472.418L138.118 492.405L204.434 492.405ZM211.722 518.752L206.193 498.765L139.901 498.765L145.508 518.752L211.722 518.752ZM219.011 545.098L213.482 525.111L147.291 525.111L152.898 545.098L219.011 545.098ZM226.299 571.444L220.77 551.458L154.682 551.458L160.288 571.444L226.299 571.444ZM233.588 597.791L228.059 577.804L162.072 577.804L167.678 597.791L233.588 597.791ZM240.876 624.137L235.347 604.15L169.462 604.15L175.068 624.137L240.876 624.137ZM248.165 650.484L242.636 630.497L176.852 630.497L182.458 650.484L248.165 650.484ZM255.454 676.83L249.924 656.843L184.242 656.843L189.848 676.83L255.454 676.83ZM262.491 702.268L257.213 683.19L191.632 683.19L196.983 702.268L262.491 702.268ZM269.779 728.614L264.501 709.536L199.022 709.536L204.373 728.614L269.779 728.614ZM277.068 754.961L271.79 735.882L206.412 735.882L211.763 754.961L277.068 754.961ZM284.356 781.307L278.827 761.32L213.547 761.32L219.153 781.307L284.356 781.307ZM291.645 807.654L286.116 787.667L220.937 787.667L226.543 807.654L291.645 807.654ZM298.434 832.193L293.404 814.013L228.327 814.013L233.933 834L298.434 834L298.434 832.193ZM125.376 446.98L130.728 466.059L197.354 466.059C195.989 460.738 194.375 454.318 192.589 446.98L125.376 446.98ZM117.986 420.634L123.337 439.712L190.838 439.712C189.428 433.808 187.937 427.423 186.397 420.634L117.986 420.634ZM110.596 394.288L115.947 413.366L184.764 413.366C183.409 407.272 182.025 400.896 180.634 394.288L110.596 394.288ZM103.206 367.941L108.557 387.02L179.121 387.02C177.847 380.828 176.573 374.456 175.316 367.941L103.206 367.941ZM95.8159 341.595L101.422 361.582L174.102 361.582C172.867 355.036 171.653 348.362 170.476 341.595L95.8159 341.595ZM88.4258 315.248L94.0321 335.235L169.386 335.235C168.271 328.638 167.195 321.965 166.171 315.248L88.4258 315.248ZM81.0358 288.902L86.6421 308.889L165.22 308.889C164.246 302.248 163.328 295.576 162.478 288.902L81.0358 288.902ZM73.6457 262.556L79.252 282.542L161.69 282.542C160.884 275.861 160.152 269.188 159.507 262.556L73.6457 262.556ZM66.2557 236.209L71.8619 256.196L158.914 256.196C158.315 249.47 157.811 242.797 157.416 236.209L66.2557 236.209ZM58.8656 209.863L64.4719 229.85L157.067 229.85C156.732 223.071 156.518 216.397 156.444 209.863L58.8656 209.863ZM51.4756 183.516L57.0818 203.503L156.415 203.503C156.434 196.653 156.615 189.976 156.978 183.516L51.4756 183.516ZM44.0855 157.17L49.6918 177.157L157.401 177.157C157.937 170.191 158.703 163.509 159.724 157.17L44.0855 157.17ZM36.9503 131.732L42.3017 150.81L160.858 150.81C161.044 149.867 161.235 148.932 161.433 148.006C162.633 142.4 163.818 136.977 164.985 131.732L36.9503 131.732ZM29.5602 105.386L34.9117 124.464L166.619 124.464C168.13 117.804 169.61 111.447 171.057 105.386L29.5602 105.386ZM22.1702 79.0392L27.5216 98.1176L172.81 98.1176C174.454 91.3705 176.05 85.0154 177.593 79.0392L22.1702 79.0392ZM14.7802 52.6928L20.3864 72.6797L179.252 72.6797C181.165 65.4203 182.988 58.7671 184.709 52.6928L14.7802 52.6928ZM7.39008 26.3464L12.9963 46.3333L186.533 46.3333C188.768 38.6426 190.805 32.003 192.613 26.3464L7.39008 26.3464ZM3.64553e-05 -1.30449e-05L5.6063 19.9869L194.684 19.9869C199.281 6.14245 201.933 -4.21816e-06 201.933 -4.21816e-06L3.64553e-05 -1.30449e-05Z'
          fill='url(#paint0_linear)'
        />
      </Mask>
      <G mask='url(#mask0)'>
        <Path
          fillRule='evenodd'
          clipRule='evenodd'
          d='M204.867 492.405L202.367 483.368C202.367 483.368 201.277 479.457 199.435 472.418L132.945 472.418L138.551 492.405L204.867 492.405ZM212.156 518.752L206.627 498.765L140.335 498.765L145.941 518.752L212.156 518.752ZM219.444 545.098L213.915 525.111L147.725 525.111L153.331 545.098L219.444 545.098ZM226.733 571.444L221.204 551.458L155.115 551.458L160.721 571.444L226.733 571.444ZM234.021 597.791L228.492 577.804L162.505 577.804L168.111 597.791L234.021 597.791ZM241.31 624.137L235.781 604.15L169.895 604.15L175.501 624.137L241.31 624.137ZM248.599 650.484L243.069 630.497L177.285 630.497L182.892 650.484L248.599 650.484ZM255.887 676.83L250.358 656.843L184.675 656.843L190.282 676.83L255.887 676.83ZM262.924 702.268L257.646 683.19L192.065 683.19L197.417 702.268L262.924 702.268ZM270.213 728.614L264.935 709.536L199.455 709.536L204.807 728.614L270.213 728.614ZM277.501 754.961L272.224 735.882L206.845 735.882L212.197 754.961L277.501 754.961ZM284.79 781.307L279.261 761.32L213.981 761.32L219.587 781.307L284.79 781.307ZM292.079 807.654L286.549 787.667L221.371 787.667L226.977 807.654L292.079 807.654ZM298.434 830.626L293.838 814.013L228.761 814.013L234.367 834L298.434 834L298.434 830.626ZM125.81 446.98L131.161 466.059L197.788 466.059C196.423 460.738 194.808 454.318 193.023 446.98L125.81 446.98ZM118.42 420.634L123.771 439.712L191.271 439.712C189.862 433.808 188.371 427.423 186.83 420.634L118.42 420.634ZM111.03 394.288L116.381 413.366L185.197 413.366C183.842 407.272 182.459 400.896 181.068 394.288L111.03 394.288ZM103.64 367.941L108.991 387.02L179.555 387.02C178.281 380.828 177.007 374.456 175.749 367.941L103.64 367.941ZM96.2495 341.595L101.856 361.582L174.535 361.582C173.301 355.036 172.087 348.362 170.91 341.595L96.2495 341.595ZM88.8594 315.248L94.4657 335.235L169.819 335.235C168.704 328.638 167.628 321.965 166.605 315.248L88.8594 315.248ZM81.4694 288.902L87.0757 308.889L165.654 308.889C164.68 302.248 163.761 295.576 162.912 288.902L81.4694 288.902ZM74.0793 262.556L79.6856 282.542L162.123 282.542C161.318 275.861 160.586 269.188 159.94 262.556L74.0793 262.556ZM66.6893 236.209L72.2955 256.196L159.348 256.196C158.749 249.47 158.245 242.797 157.849 236.209L66.6893 236.209ZM59.2992 209.863L64.9055 229.85L157.501 229.85C157.165 223.071 156.952 216.397 156.877 209.863L59.2992 209.863ZM51.9092 183.516L57.5154 203.503L156.849 203.503C156.868 196.653 157.049 189.976 157.412 183.516L51.9092 183.516ZM44.5191 157.17L50.1254 177.157L157.834 177.157C158.371 170.191 159.137 163.509 160.158 157.17L44.5191 157.17ZM37.3839 131.732L42.7353 150.81L161.292 150.81C161.477 149.867 161.669 148.932 161.867 148.006C163.067 142.4 164.251 136.977 165.419 131.732L37.3839 131.732ZM29.9938 105.386L35.3453 124.464L167.052 124.464C168.563 117.804 170.044 111.447 171.491 105.386L29.9938 105.386ZM22.6038 79.0392L27.9552 98.1176L173.243 98.1176C174.887 91.3705 176.484 85.0154 178.027 79.0392L22.6038 79.0392ZM15.2137 52.6928L20.82 72.6797L179.685 72.6797C181.599 65.4203 183.422 58.7671 185.142 52.6928L15.2137 52.6928ZM7.82367 26.3464L13.4299 46.3333L186.966 46.3333C189.201 38.6426 191.238 32.003 193.047 26.3464L7.82367 26.3464ZM0.43363 -1.3026e-05L6.03989 19.9869L195.118 19.9869C199.715 6.14245 202.367 -4.1992e-06 202.367 -4.1992e-06L0.43363 -1.3026e-05Z'
          fill='url(#paint1_linear)'
        />
        <AnimatedRect
          animatedProps={animatedProps}
          width={298}
          fill='black'
          fillOpacity={0.75}
        />
      </G>
      <Path
        d='M357.466 834H369.082C376.138 834 380.794 830.64 380.794 824.928V824.784C380.794 820.224 377.77 817.872 373.834 816.72C376.618 815.616 379.354 813.36 379.354 808.896V808.8C379.354 806.544 378.538 804.672 377.146 803.28C375.274 801.408 372.394 800.4 368.842 800.4H357.466V834ZM375.706 809.376C375.706 813.264 372.778 815.472 368.314 815.472H361.066V803.664H368.65C373.114 803.664 375.706 805.824 375.706 809.28V809.376ZM377.146 824.592V824.688C377.146 828.528 374.074 830.736 369.226 830.736H361.066V818.64H368.794C374.218 818.64 377.146 820.848 377.146 824.592ZM387.137 834H390.737V820.944H398.369L406.817 834H411.137L402.113 820.224C406.769 819.072 410.081 815.856 410.081 810.528V810.432C410.081 807.6 409.121 805.2 407.441 803.52C405.521 801.552 402.449 800.4 398.609 800.4H387.137V834ZM390.737 817.68V803.712H398.369C403.409 803.712 406.481 806.16 406.481 810.576V810.672C406.481 814.944 403.457 817.68 397.985 817.68H390.737ZM414.361 834H418.057L421.321 825.168H436.441L439.705 834H443.545L430.729 800.208H427.177L414.361 834ZM422.521 821.904L428.905 804.864L435.241 821.904H422.521ZM449.153 834H452.753V824.592L458.417 818.016L469.457 834H473.825L460.913 815.088L473.153 800.4H468.689L452.753 819.792V800.4H449.153V834ZM478.731 834H499.467V830.688H482.331V818.688H497.499V815.424H482.331V803.712H499.227V800.4H478.731V834Z'
        fill='white'
      />
      <Path d='M238.434 847H563.434' stroke='white' strokeWidth={2} />
      <Defs>
        <LinearGradient
          id='paint0_linear'
          x1={-0.566302}
          y1={834}
          x2={-0.566281}
          y2={-0.0000192336}
          gradientUnits='userSpaceOnUse'>
          <Stop stopColor='#00C2FF' />
          <Stop offset={0.440625} stopColor='#AFE550' />
          <Stop offset={0.794792} stopColor='#FFF500' />
          <Stop offset={1} stopColor='#FF0000' />
        </LinearGradient>
        <LinearGradient
          id='paint1_linear'
          x1={-0.132708}
          y1={834}
          x2={-0.132688}
          y2={-0.0000192336}
          gradientUnits='userSpaceOnUse'>
          <Stop stopColor='#00C2FF' />
          <Stop offset={0.440625} stopColor='#AFE550' />
          <Stop offset={0.794792} stopColor='#FFF500' />
          <Stop offset={1} stopColor='#FF0000' />
        </LinearGradient>
      </Defs>
    </Svg>
  );
};

export default LeftTachometer;
